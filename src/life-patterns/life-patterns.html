<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<link rel="import" href="../life-preview-canvas/life-preview-canvas.html">


<dom-module id="life-patterns">
  <template>
    <template is="dom-repeat" items="[[catalogForPage]]">
      <paper-card class="dark">
        <div class="card-content">
          <life-preview-canvas width="240" height="240" auto-play rle="[[item.payload]]"></life-preview-canvas>

          <div role="listbox">
            <paper-item>[[item.name]]</paper-item>
            <paper-item>[[item.author]]</paper-item>
            <paper-item>[[item.comments]]</paper-item>
            <paper-item>[[item.meta.rule]]</paper-item>
            <paper-item>[[item.meta.x]]</paper-item>
            <paper-item>[[item.meta.y]]</paper-item>
          </div>
        </div>
      </paper-card>
    </template>
  </template>

  <style>
    paper-card {
     box-sizing: border-box;
     margin: 4px;
     flex: 0 0 auto;
   }
  </style>

  <script>
    Polymer({
      is: 'life-patterns',
      properties: {
        app: {
          type: Object
        },
        catalogForPage: {
          type: Object,
          computed: '_computeCatalogForPage(app._catalog, currentPage, perPage)'
        },
        currentPage: {
          type: Number,
          value: 0
        },
        perPage: {
          type: Number,
          value: 10,
        },
        pageCount: {
          type: Number,
          computed: '_computePageCount(app._catalog, perPage)'
        }


      },

      // _pager: function(item){
      //   if(Math.random() > 0.98){
      //     console.log(item);
      //     return true;
      //   }
      //   else{
      //     return false;
      //   }
      // }
      _computePageCount: function(catalog, perPage){
        return Math.ceil(catalog.length / perPage);
      },

      _computeCatalogForPage: function(catalog, currentPage, perPage){
        return catalog.slice(currentPage * perPage, currentPage * perPage + perPage);
      }
    });
  </script>
</dom-module>
