<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html">

<link rel="import" href="../../bower_components/paper-styles/default-theme.html">
<link rel="import" href="../../bower_components/paper-styles/shadow.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="../life-canvas-base/life-canvas-base.html">
<link rel="import" href="../life-preview-canvas/life-preview-canvas.html">

<dom-module id="life-brush-editor">
  <template>
    <!-- <paper-header-panel class="flex"> -->
      <!-- <paper-toolbar>
        <div>Hello World!</div>
      </paper-toolbar> -->


      <!-- <life-canvas-base></life-canvas-base> -->
      <!-- <life-preview-canvas id="canvas" width="240" height="240" auto-play rle="[[pattern.payload]]" pattern-width="[[pattern.meta.x]]" pattern-height="[[pattern.meta.y]]"></life-preview-canvas> -->

      <!-- <div>R</div>
      <paper-slider class="red" value="{{red}}" max="255" editable></paper-slider>
      <div>G</div>
      <paper-slider class="green" value="{{green}}" max="255" editable></paper-slider>
      <div>B</div>
      <paper-slider class="blue" value="{{blue}}" max="255" editable></paper-slider> -->
    <!-- </paper-header-panel> -->

    <!-- <paper-header-panel mode="seamed"> -->
      <paper-toolbar>
        <div class="title">Brush Editor</div>
      </paper-toolbar>

      <div class="content fit">
        <div class="toolbar">
          <paper-icon-button icon="create"></paper-icon-button>
          <paper-icon-button icon="delete"></paper-icon-button>
          <div class="padding"></div>
          <paper-icon-button icon="settings"></paper-icon-button>
        </div>
        <div class="preview">
          <div class="dummy-image" style="width: 200px; height: 200px; background: #eee"></div>
          <div class="brush-info">
            <div class="brush-title">
              1 x 1 Pencil
            </div>
            <div class="brush-meta">
              1 x 1
            </div>
          </div>
        </div>
      </div>
    <!-- </paper-header-panel> -->
  </template>

  <style>
    :host {
      display: block;
      position: relative;
      box-sizing: border-box;
      -moz-box-sizing: border-box;

      width: 300px;
      @apply(--shadow-elevation-2dp)

      /*@apply(--layout-horizontal);*/
    }
    /*paper-header-panel {
      width: 300px;
      height: 300px;
      @apply(--shadow-elevation-2dp);

      --paper-header-panel {
      }
    }*/
    .content {
      @apply(--layout-horizontal);
    }
    .toolbar {
      width: 52px;
      padding: 12px 0;

      /*background: var(--primary-color);*/
      background: #333;
      color: var(--dark-theme-text-color);

      @apply(--layout-vertical);
      @apply(--layout-center);

      @apply(--shadow-elevation-2dp);
    }
    /*.toolbar paper-icon-button[icon="settings"] {
      @apply(--layout-self-end);
    }*/
    .toolbar .padding {
      @apply(--layout-flex);
    }
    /*paper-header-panel{
      position: fixed;
      right: 8px;
      bottom: 8px;
      width: 320px;
      height: 320px;
      background: #fff;
      @apply(--shadow-elevation-2dp);
      z-index: 4;
    }*/

    /*paper-slider.red {
      --paper-slider-knob-color: var(--paper-red-500);
      --paper-slider-active-color: var(--paper-red-500);
    }
    paper-slider.green {
      --paper-slider-knob-color: var(--paper-green-500);
      --paper-slider-active-color: var(--paper-green-500);
    }
    paper-slider.blue {
      --paper-slider-knob-color: var(--paper-light-blue-500);
      --paper-slider-active-color: var(--paper-light-blue-500);
    }*/
  </style>

  <script>
    Polymer({
      is: 'life-brush-editor',
      properties: {
        app: {
          type: Object
        },
        // rle: {
        //   type: String,
        //   value: '15b2o3b2o15b3$6b2o21b2o6b$6b2o21b2o6b2$3b2o27b2o3b$3b2o9b2o5b2o9b2o3b$9b3ob2o7b2ob3o9b$8bobo15bobo8b$8b2o17b2o8b$8bo19bo8b2$8bo19bo8b$7b2o19b2o7b$o6bo21bo6bo$o35bo4$o35bo$o6bo21bo6bo$7b2o19b2o7b$8bo19bo8b2$8bo19bo8b$8b2o17b2o8b$8bobo15bobo8b$9b3ob2o7b2ob3o9b$3b2o9b2o5b2o9b2o3b$3b2o27b2o3b2$6b2o21b2o6b$6b2o21b2o6b3$15b2o3b2o!',
        // },
        pattern: {
          type: Object
        },
        red: {
          type: Number,
          value: 255
        },
        green: {
          type: Number,
          value: 0
        },
        blue: {
          type: Number,
          value: 0
        },
      },

      observers: [
        '_handleColorChanged(red, green, blue)'
      ],

      _handleColorChanged: function(red, green, blue){
        // if(this.app){
          // this.app.color = 'rgb(' + red + ', ' + green + ', ' + blue + ')';
        // }
        this.set('app.color', 'rgb(' + red + ', ' + green + ', ' + blue + ')');
      },
    });
  </script>
</dom-module>
