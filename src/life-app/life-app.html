<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<dom-module id="life-app">
  <template>
    <life-canvas app="{{app}}" style="float: left"></life-canvas>
    <!-- <nav>
      <paper-button on-tap="handleTap" hogedata="hehe">Heavy Weight Spaceship</paper-button>
    </nav> -->
    <paper-listbox on-iron-select="handleItemChange" selected="0" style="float: left;">
      <paper-item id="pencil">Pencil</paper-item>
      <paper-item id="glider">Glider</paper-item>
      <paper-item id="light_weight_spaceship">Light Weight Spaceship</paper-item>
      <paper-item id="medium_weight_spaceship">Medium Weight Spaceship</paper-item>
      <paper-item id="heavy_weight_spaceship">Heavy Weight Spaceship</paper-item>
      <paper-item id="glider_gun">Glider Gun</paper-item>
    </paper-listbox>

  </template>

  <script>
    Polymer({
      is: 'life-app',

      properties: {
        app: {
          type: Object,
          value: {}
        }
      },

      ready: function() {
        this.app.catalog = {};

        this.app.catalog.pencil = [
          "1"
        ];
        this.app.catalog.glider = [
          "010",
          "001",
          "111"];
        this.app.catalog.light_weight_spaceship = [
          "01001",
          "10000",
          "10001",
          "11110"];
        this.app.catalog.medium_weight_spaceship = [
          "000100",
          "010001",
          "100000",
          "100001",
          "111110"];
        this.app.catalog.heavy_weight_spaceship = [
          "0001100",
          "0100001",
          "1000000",
          "1000001",
          "1111110"];
        this.app.catalog.glider_gun = [
          "000000000000000000000000100000000000",
          "000000000000000000000010100000000000",
          "000000000000110000001100000000000011",
          "000000000001000100001100000000000011",
          "110000000010000010001100000000000000",
          "110000000010001011000010100000000000",
          "000000000010000010000000100000000000",
          "000000000001000100000000000000000000",
          "000000000000110000000000000000000000"];
      },

      handleTap: function(e, detail) {
        // var rect = e.target.getBoundingClientRect();
        // var x = e.clientX - rect.left;
        // var y = e.clientY - rect.top;

        // document.querySelector('life-canvas').injectPattern( 50, 50, this.app.catalog.glider);
        // document.querySelector('life-canvas').injectPattern( 50, 50, this.app.catalog.light_weight_spaceship);
        document.querySelector('life-canvas').injectPattern( 50, 50, this.app.catalog.heavy_weight_spaceship);
      },

      handleItemChange: function(e){
        // console.log("Changed!!!");
        // console.log(e.detail.item.id);
        // console.log(e);

        this.app.selected = e.detail.item.id;
      }

    });
  </script>
</dom-module>
