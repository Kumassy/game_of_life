<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">

<link rel="import" href="../life-app/life-app.html">

<dom-module id="app-shell">
  <template>
    <!-- app-location binds with the URL and produces a route for
    app-route elements to consume. Since this demo needs to run without
    server cooperation (e.g. with polyserve, in the elements catalog, etc) we'll
    use the hash portion of the URL for our route paths. -->
    <!-- <app-location route="{{route}}" use-hash-as-path></app-location> -->
    <!-- <app-location route="{{route}}"></app-location> -->


    <!-- app-routes parse route paths based on the their `pattern`.
    Parameters are extracted into the `data` object. The rest of the path that
    comes after the `pattern` is put into the `tail` object, which can be
    passed to the `route` property of downstream app-routes. -->
    <!-- <app-route route="{{route}}" pattern="/:page" data="{{data}}"></app-route> -->
    <!-- <app-route route="{{route}}" pattern="/" query-params="{{params}}"></app-route> -->

    <life-app params="{{params}}">
    </life-app>
  </template>

  <script>
    Polymer({
      is: 'app-shell',
      properties: {
        route: {
          type: Object,
          // observer: '_routeChanged'
        },
        params: {
          type: Object
        }
      },

      ready: function() {
        // console.log(this.route);

        var arg = {};
        var pair=location.search.substring(1).split('&');
        for(var i=0;pair[i];i++) {
            var kv = pair[i].split('=');
            arg[kv[0]]=kv[1];
        }
        this.params = arg;
        console.log(this.params);
      },

      // _routeChanged: function(newValue, oldValue){
      //   // console.log(newValue);
      //
      // }
    });
  </script>
</dom-module>
